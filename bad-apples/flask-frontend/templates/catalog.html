{% extends "base.html" %}

{% block title %}Apple Catalog - Bad Apples Orchard{% endblock %}

{% block content %}
<section class="catalog">
    <h1>Our Apple Varieties</h1>
    <p class="subtitle">Choose from our selection of fresh, locally-grown apples</p>

    <div class="apple-grid">
        {% for variety in varieties %}
        <div class="apple-card">
            <img src="{{ url_for('static', filename='images/' + (variety.name|variety_image)) }}"
                 alt="{{ variety.name }}"
                 class="apple-image">
            <h3>{{ variety.name }}</h3>
            <p class="description">{{ variety.description }}</p>
            <div class="apple-details">
                <p class="price">${{ "%.2f"|format(variety.price_per_lb|float) }} per lb</p>
                <p class="stock">
                    {% if variety.stock_lbs > 100 %}
                    <span class="stock-good">In Stock ({{ variety.stock_lbs }} lbs)</span>
                    {% elif variety.stock_lbs > 50 %}
                    <span class="stock-medium">Limited Stock ({{ variety.stock_lbs }} lbs)</span>
                    {% else %}
                    <span class="stock-low">Low Stock ({{ variety.stock_lbs }} lbs)</span>
                    {% endif %}
                </p>
                <p class="location"><small>{{ variety.orchard_location }}</small></p>
                <p class="season"><small>Harvest: {{ variety.harvest_season }}</small></p>
            </div>
            <div class="add-to-cart-form">
                <input type="number" class="quantity-input" value="1.0" min="0.5" step="0.5" id="qty-{{ variety.id }}">
                <button class="btn btn-primary add-to-cart-btn variety-link"
                        data-variety-id="{{ variety.id }}"
                        data-variety-name="{{ variety.name }}"
                        data-price="{{ variety.price_per_lb }}">
                    Add to Cart
                </button>
            </div>
        </div>
        {% endfor %}
    </div>

    {% if not varieties %}
    <p class="text-center">No apple varieties available at this time.</p>
    {% endif %}
</section>

<div id="notification" class="notification hidden"></div>
{% endblock %}
